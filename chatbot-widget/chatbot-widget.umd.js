(function(e,r){typeof exports=="object"&&typeof module<"u"?module.exports=r(require("vue")):typeof define=="function"&&define.amd?define(["vue"],r):(e=typeof globalThis<"u"?globalThis:e||self,e.ChatbotWidget=r(e.Vue))})(this,function(e){"use strict";const r=(l,n)=>{const o=l.__vccOpts||l;for(const[s,i]of n)o[s]=i;return o},p={class:"chat-container"},u={class:"message-list"},f={key:0,class:"loading-message"},m={class:"input-area"},h=["disabled"],_=["disabled"],y="https://black-mud-382d.corsicajp.workers.dev/";return r({__name:"ChatbotWindow",setup(l){const n=e.ref([]),o=e.ref(""),s=e.ref(!1),i=async()=>{if(o.value.trim()==="")return;const c=o.value;n.value.push({type:"user",text:c}),o.value="",s.value=!0;try{const t=await fetch(y,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({question:c})});if(!t.ok){const d=await t.json();throw new Error(`API Error: ${t.status} - ${d.error||"Unknown error"}`)}const a=await t.json();n.value.push({type:"ai",text:a.answer})}catch(t){console.error("Failed to fetch AI answer:",t),n.value.push({type:"ai",text:"エラーが発生しました: "+t.message})}finally{s.value=!1}};return(c,t)=>(e.openBlock(),e.createElementBlock("div",p,[t[1]||(t[1]=e.createElementVNode("h1",null,"AI Chatbot",-1)),e.createElementVNode("div",u,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(n.value,(a,d)=>(e.openBlock(),e.createElementBlock("div",{key:d,class:e.normalizeClass(["message",a.type])},e.toDisplayString(a.text),3))),128)),s.value?(e.openBlock(),e.createElementBlock("div",f,"AIが思考中...")):e.createCommentVNode("",!0)]),e.createElementVNode("div",m,[e.withDirectives(e.createElementVNode("input",{"onUpdate:modelValue":t[0]||(t[0]=a=>o.value=a),onKeyup:e.withKeys(i,["enter"]),placeholder:"質問を入力してください...",disabled:s.value},null,40,h),[[e.vModelText,o.value]]),e.createElementVNode("button",{onClick:i,disabled:s.value},"送信",8,_)])]))}},[["__scopeId","data-v-2bf4217d"]])});
